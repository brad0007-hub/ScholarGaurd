{% extends 'base.html' %}
{% block content %}
<h1>Students</h1>
<a class="btn" href="{{ url_for('student_new') }}">+ Add Student</a>
<table class="table">
  <thead>
    <tr>
      <th>Roll No</th>
      <th>Name</th>
      <th>Email</th>
      <th>Attendance</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for s in students %}
    <tr>
      <td>{{ s.roll_no }}</td>
      <td>{{ s.name }}</td>
      <td>{{ s.email or '-' }}</td>
      <td>
        {% if s.total_attendance %}
          {{ s.presents }}/{{ s.total_attendance }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        <a href="{{ url_for('student_edit', student_id=s.id) }}">Edit</a>
        <form action="{{ url_for('student_delete', student_id=s.id) }}" method="post" style="display:inline" onsubmit="return confirm('Delete student?')">
          <button type="submit" class="linklike">Delete</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
